# CPP 06

**Topics covered**:

- C-type conversions:
  - There are implicit and explicit casts
  - `int a = 42` + `double b = a` is possible thanks to implicit conversion. It would be `double b = (double)a` with explicit cast
  - There is a hierarchy among types, dending on precision
  - With some implicit conversions, there can be a loss of precision if the new type has less precision (e.g. `double` casted to `int`)
  - It is safer to do explicit conversion when the types are different
- Type reinterpretation:
  - `void *` is the most generic type
  - Implicit promotion is fine (e.g. `float` to `void *`), but implicit demotion is dangerous (e.g. `int *` to `void *`)
  - Explicit cast tells the compiler demotion is wanted
- Type qualifier reinterpretation:
  - Implicit demotion not possibile with pointers: compile error (`discards 'const'`)
  - Implicit cast is always the best choice
- Upcast and downcast
  - Upcast: from child to parent. Downcast: from parent to child
  - Downcast implicit is flagged by compiler
  - Classes create new types that are fall into a hierarchy thanks to inheritance
- Static cast:
  - C++-style explicit cast
  - `static_cast<type>(foo)`
  - Can be used with user-defined types too
  - It can detect if the cast doesn't belong to the same heritage line and throws an error
- Dynamic cast:
  - Cast happens at runtime and not during compiling
  - Used for virtual classes
  - Returns `null` if cast is not possible
  - It possible to cast by pointer `dynamic_cast<Child *>(foo)` or by reference `dynamic_cast<Child &>(foo)`
  - When it's by reference, it can't return a `null` reference, so there's a specific type of exception: `std:bad_cast &bc`
- Reinterpret cast
  - Reinterpretation both in updown and downcast
  - `reinterpret_cast<type>(foo)`
  - It can perform dangerous conversions and force them
- Const cast
  - It allows to cast the type qualifier `const`
  - It can be symptom of bad design
- Cast operators
  - Overload, but for casting
  - `operator int() { return static_cast<int>(this->v)}`
  - Once the operator is defined, it can be used for implicit casts as well, e.g. to cast a class representing a `float` to a native `float`
- `explicit` keyboard
  - Doesn't allow implicit conversions when they keyword is provided
  - Forces you to use an explicit cast